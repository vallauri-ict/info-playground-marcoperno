/* OGNI MODULO PUO' CONTENERE QUALUNQUE TIPO DI INFORMAZIONE: funzioni, classi, codice generico, risorse */

function servizio1(info, response){
    console.log("Io sono servizio 1");

    response.writeHead(200, {"Content-Type":"text/plain"});
    var parametri = info.query;
    response.write("parametro1: " + parametri.param);
    response.end();
}

function serv2(request, response, url){
    response.writeHead(200, {"Content-Type":"text/plain"});

    var regioni = require("luogo");

    response.write("Nome regione: " + regioni.piemonte.nomeReg);
    response.write("Posizione: " + regioni.piemonte.posizione);
    response.write("Capoluogo: " + regioni.piemonte.capoluogo);
    response.end();
}

function serv3(request, response, url){
    response.writeHead(200, {"Content-Type":"text/plain"});

    var regioniRichieste = require("luogo");

    regioniRichieste.regioni.forEach(element => {
        response.write("Nome regione: " + element.nomeReg);
        response.write("Posizione: " + element.posizione);
        response.write("Capoluogo: " + element.capoluogo);
        
    });
    response.end();
}

//Esporto la funzione in modo anonimo
//MODO1 -> module.exports = richiamofunzione;
//MODO2 -> module.exports = function(....){ ... };
module.exports = servizio1;

//Esporto la funzione con un preciso nome (in questo caso servizio2)
//MODO1 -> module.exports.nomeFunzione = richiamofunzione;
//MODO2 -> module.exports.nomeFunzione = function(....){ ... };
module.exports.servizio2 = serv2;
module.exports.servizio3 = serv3;